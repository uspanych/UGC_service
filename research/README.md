# Исследование скорости чтения/записи данных в ClickHouse


## Условия проведения исследования

1. Конфиги кластера ClickHouse находятся в папке `data`
2. Файл `docker-compose.yml` содержит описание нод кластера
3. Создание распределенных таблиц, шардов и т.д. производилось автоматизировано с помощью скрипта `config_clickhouse.py`
4. Для исследований был использован файл на 10кк строк (аналогичный испытаниям Vertica)
5. Для загрузки данных пачками был использован скрипт `loader.py`
6. Для выборки данных в случайные промежутки времени был использован скрипт `selecter.py`

## Результаты исследования

### При размере чанка 10_000
```
На вставку одной пачки затрачено:  0.14751410484313965      
Всего затрачено:  141.66155576705933
На селект одной пачки 10000 под нагрузкой:  0.7723629474639893
На селект всех записей под нагрузкой (7_754_971 записей):  51.66323971748352
На селект одной пачки 10000 без нагрузки:  0.2987222671508789
На селект всех записей без нагрузки (10_000_000):  30.824798822402954
```


### При размере чанка 100_000
```
На вставку одной пачки затрачено:  1.3067262172698975
Всего затрачено:  80.38575768470764
На селект одной пачки 10000 под нагрузкой:  0.12115073204040527
На селект всех записей под нагрузкой (5_300_000 записей):  37.99062895774841
На селект одной пачки 10000 без нагрузки:  0.1346421241760254
На селект всех записей без нагрузки (10_000_000):  32.0315942764282
```

### При размере чанка 1_000_000
```
На вставку одной пачки затрачено:  2.9924445152282715
Всего затрачено:  62.004828691482544
На селект одной пачки 10000 под нагрузкой:  0.16381382942199707
На селект всех записей под нагрузкой (6_000_000 записей):  26.103007555007935
На селект одной пачки 10000 без нагрузки:  0.06439709663391113
На селект всех записей без нагрузки (10_000_000):  32.55125427246094
```
___

## Вывод
Clickhouse эффективней всего работает с большими пачками данных, что соответствует описанию из документации.